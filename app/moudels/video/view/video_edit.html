{include file="/app/rmcore/view/public/hearder" /}

<body  style="overflow: auto;border-radius: 3px;">


<div class="tab-contain" style="margin-top: 10px;">
    <!-- tab栏 -->
    <ul id="tabs">
        <li class="current"><span title="tab1">常规选项</span></li>
        <li><span  title="tab2">其他选项</span></li>
    </ul>

    <div style="height: 1px;background-color: gainsboro"></div>
    <!-- 对应显示内容 -->

    <div id="contents">
        <form action="{$actions.video_request_add}"  method="post">
            <input name="col_id" value="{$column_id}" type="hidden">
            <input name="id" value="{$list.id}" type="hidden">
            <div id="tab1" class="item show">
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">标题：</div>
                        <div class="ax-form-input"><input type="text" name="title" value="{$list.title}"></div>
                    </div>
                </div>

                <div class="ax-break-lg"></div>


                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">封面图：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <input id="file" onchange=handleFile("file") class="ax-input-file" type="file">
                                <input name="org_img" value="{$list.org_img}" placeholder="上传图片" id="org_img_file" type="text">
                                <span  class="ax-file-btn">选择图片</span>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">视频上传：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                    <input name="video_url" placeholder="点击选择视频" value="{$list.video_url}"  id="file-view3" type="text">
                                    <span class="ax-file-btn" id="file-adds">添加</span>
<!--                                <input onchange="document.getElementById('file-view3').value=this.value;" id="file-upload3" class="ax-input-file" type="file">-->
<!--                                <input name="" placeholder="点击选择视频" onmouseout="document.getElementById('file-upload').style.display='none';" id="file-view3" type="text">-->
<!--                                <span onmouseover="document.getElementById('file-upload3').style.display='block';" class="ax-file-btn">添加</span>-->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">内容详情：</div>
                        <div style="position: relative;width:700px ">
                            <div id="content" class=""></div>
                        </div>
                    </div>
                </div>

                <div class="ax-break-lg"></div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label"></div>
                        <div class="ax-flex-block">
                            <div class="ax-form-input"><button type="submit" class="ax-btn ax-primary ax-full">确认提交</button></div>
                        </div>
                    </div>
                </div>

            </div>


            <div id="tab2" class="item">
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">TGA标签：</span>
                        <div class="ax-form-input"><input type="text" name="tags" value="{$list.tags}"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO标题：</span>
                        <div class="ax-form-input"><input type="text" name="seo_title" value="{$list.seo_title}"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO关键词：</span>
                        <div class="ax-form-input"><input type="text" name="seo_key" value="{$list.seo_key}"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO描述：</span>
                        <div class="ax-form-input">
                            <textarea name="seo_des" cols="" rows="" placeholder="描述">{$list.seo_des}</textarea>
                        </div>
                    </div>
                </div>
                <!--<div class="ax-break-lg"></div>-->
                <!--<div class="ax-form-group">-->
                <!--<div class="ax-flex-row">-->
                <!--<span class="ax-form-label">作者：</span>-->
                <!--<div class="ax-form-input"><input type="text"></div>-->
                <!--</div>-->
                <!--</div>-->
                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">浏览量：</span>
                        <div class="ax-form-input"><input type="text"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">阅读权限：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <select name="">
                                    <option value="0">开放阅读</option>
                                    <option value="1">待审核稿件</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
<!--                <div class="ax-break-lg"></div>-->
<!--                <div class="ax-form-group">-->
<!--                    <div class="ax-flex-row">-->
<!--                        <div class="ax-form-label">发布时间：</div>-->
<!--                        <div class="ax-form-con">-->
<!--                            <div class="ax-form-input"><input name="date" placeholder="选择时间" type="text" id="datepicker02"></div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">文档模板：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <select name="view_path">
                                    <option value="0">模板1</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label"></div>
                        <div class="ax-flex-block">
                            <div class="ax-form-input"><button type="button" class="ax-btn ax-primary ax-full">确认提交</button></div>
                        </div>
                    </div>
                </div>


            </div>
        </form>
    </div>
</div>

</body>
<style>
    #tabs {  overflow: hidden;  width: 80%;  margin: 0;  padding: 0;  list-style: none;  }
    #tabs li {  float: left;  margin-left: 14px;  height: 40px;  line-height: 40px;  width: 100px;cursor: pointer  }
    li span {  position: relative;  font-size: 16px;  }
    .current li{  outline: 0;  color: #3398cc;  border-bottom: 1px solid #3398cc;    }
    .current span{  outline: 0;  color: #3398cc;  border-bottom: 1px solid #3398cc;  }
    .current span:before{content: '';position: absolute;bottom: 0;left: 2px;width: 95%;
        height: 2px;background: #3398cc;border-radius: 30px;}
    #contents {  background: #fff;  padding: 30px 0 25px;  position: relative;  }
    .item{  display: none;  }
    .show{  display: block;  }

</style>
<script src="/static/rmtop/js/dropzone.js" type="text/javascript"></script>
<script type="text/javascript">
    if ($.cookie('video_edit_tab_current')!= null){
        let num = $.cookie("video_edit_tab_current");
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $("#tabs li ").find("span").eq(num).parent().addClass("current");
        $("#contents div").removeClass("show");
        if(num == 1){
            $("#tab2").addClass('show')
        }else{
            $("#tab1").addClass('show')
        }
    }else{
        let num = 0;
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $("#tabs li ").find("span").eq(num).parent().addClass("current");
        $("#contents div").removeClass("show");
        $("#tab1").addClass('show')
    }

    $('#tabs li span').click(function(e) {
        e.preventDefault();
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $(this).parent().addClass("current");
        $("#contents div").removeClass("show");
        $('#' + $(this).attr('title')).addClass('show');
        let index = $("#tabs li ").find("span").index(this);
        $.cookie('video_edit_tab_current',index);
    });

    //发布时间
    //    $('#datepicker02').mobiscroll().date({
    //        theme: 'ax',
    //        lang:'zh',
    //        onBeforeShow:function(event, inst){//显示前的点击事件
    //            $('#'+this.id).addClass('ax-focus')
    //        },
    //        onClose: function (event, inst) {//关闭事件
    //            $('#'+this.id).removeClass('ax-focus');
    //        },
    //        display: 'bubble',
    //        rows:5,
    //    });

    $(document).ready(function () {
        $("#file-adds").dropzone({
            url: "{$actions.upload}",
            // previewTemplate: $('#template01').html(),
            paramName: "file",
            maxFilesize: 5,
            maxFiles: 5,
            addRemoveLinks:true,
            acceptedFiles: ".mp4,.ogg,.mpeg4,.webm",
            init: function () {

                var myDropzone = this, submitButton = document.querySelector("#qr"),
                    cancelButton = document.querySelector("#cancel");
                myDropzone.on('addedfile', function (file) {
                    //添加上传文件的过程，可再次弹出弹框，添加上传文件的信息
                });
                myDropzone.on('sending', function (data, xhr, formData) {
                    //向后台发送该文件的参数

                });
                myDropzone.on("complete", function(file) {
                    myDropzone.removeFile(file);
                });

                myDropzone.on('success', function (files, response) {
                    //文件上传成功之后的操作
                    $("#file-view3").val(response.savename)

                });
                myDropzone.on('error', function (files, response) {
                    //文件上传失败后的操作
                });
            }
        });
    });

</script>

<script charset="utf-8" src="/static/neditor/neditor.config.js"></script>
<script charset="utf-8" src="/static/neditor/neditor.all.js"></script>
<script charset="utf-8" src="/static/neditor/neditor.service.js"></script>
<script>
    var ue = UE.getEditor("content",{
        autoHeight: false,
        initialFrameHeight:400,
        initialFrameWidth:window.screen.width/2.2,
    });
    ue.ready(function() {
        //设置编辑器的内容
        /**
         * @param $list 双引号 有bug
         */
        ue.setContent('{$list.content|raw}');
    });

</script>


