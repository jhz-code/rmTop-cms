{include file="/app/rmcore/view/public/hearder" /}

<script src="/static/rmtop/js/img-Atlas.js" type="text/javascript"></script> <!--多图上传-->

<body  style="overflow: auto;border-radius: 3px;">

<div class="tab-contain" style="margin-top: 10px;">
    <!-- tab栏 -->
    <ul id="tabs">
        <li class="current"><span title="tab1">内容项</span></li>
        <li><span title="tab2">图片集</span></li>
        <li><span  title="tab3">基础配置项</span></li>
    </ul>

    <div style="height: 1px;background-color: gainsboro"></div>
    <!-- 对应显示内容 -->

    <div id="contents">
        <form action="{$actions.product_request_add}"  method="post">
            <div id="tab1" class="item show">
                <input name="col_id" value="{$column_id}" type="hidden">
                <input name="id" value="{$list.id}" type="hidden">
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">标题：</div>
                        <div class="ax-form-input"><input type="text" name="title" value="{$list.title}"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-flex-row">
                    <div class="ax-form-label">所属分类：</div>
                    <div class="ax-form-con">
                        <div class="ax-form-input">
                            <select name="category">
                                {volist name="category" id="vo"}
                                <option value="{$vo.id}" {if $vo.id == $list.category}selected{/if} >{$vo.title}</option>
                                {/volist}
                            </select>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO标题：</span>
                        <div class="ax-form-input"><input name="seo_title" value="{$list.seo_title}" type="text"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO关键词：</span>
                        <div class="ax-form-input"><input name="seo_key"  value="{$list.seo_key}" type="text"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">SEO描述：</span>
                        <div class="ax-form-input">
                            <textarea name="seo_des" cols="" rows="" placeholder="描述">{$list.seo_des}</textarea>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">封面图：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <input id="file" onchange=handleFile("file") class="ax-input-file" type="file">
                                <input name="org_img" value="{$list.org_img}" placeholder="上传图片" id="org_img_file" type="text">
                                <span  class="ax-file-btn">选择图片</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>


                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">TGA标签：</span>
                        <div class="ax-form-input"><input  name="tags" value="{$list.tags}" type="text"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>


                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">浏览量：</span>
                        <div class="ax-form-input"><input type="text"></div>
                    </div>
                </div>

                <div class="ax-break-lg"></div>
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">阅读权限：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <select name="access">
                                    <option value="0">开放阅读</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">跳转链接：</div>
                        <div class="ax-form-input"><input type="text" value="{$list.turl}"  name="turl"></div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">特定模板：</div>
                        <div class="ax-form-con">
                            <div class="ax-form-input">
                                <label>
                                    <input name="view_path" value="" placeholder="选择模版,不设置则为默认模版" type="text">
                                </label>
                                <span onmouseover="document.getElementById('file-upload').style.display='block';" class="ax-file-btn">选择模版</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>

                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <div class="ax-form-label">内容详情：</div>
                        <div style="position: relative;width:700px ">
                            <div id="content" class=""></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab2" class="item">
                <div class="ax-form-group">
                    <div class="ax-flex-row">
                        <span class="ax-form-label">图片集：</span>
                        <div class="ax-form-input" style="width: 60%">
                            <div class="input-w">
                                <div class="z_photo upimg-div clear" >
                                    <section class="z_file fl">
                                        <img src="/static/rmtop/images/up-img.png" class="add-img">
                                        <input type="file" name="file" id="Atlas" class="file" value="" accept="image/jpg,image/jpeg,image/png,image/bmp" multiple />
                                    </section>
                                </div>
                                <p class="up-p">温馨提示：最多上传10张</p>
                            </div>
                            <aside class="mask works-mask">
                                <div class="mask-content">
                                    <p class="del-p ">您确定要删除该图片吗？</p>
                                    <p class="check-p"><span class="del-com wsdel-ok">确定</span><span class="wsdel-no">取消</span></p>
                                </div>
                            </aside>
                        </div>
                    </div>
                </div>
                <div class="ax-break-lg"></div>
            </div>

            <div id="tab3" class="item">
                <div class="ax-break-lg"></div>
                <div class="ax-break-lg"></div>
                <!--额外参数配置开始-->
                {include file="/app/rmcore/view/public/params_form" /}
                <div class="ax-break-lg"></div>
                <div class="ax-break-lg"></div>

            </div>

            <div class="ax-break-lg"></div>
            <div class="ax-break-lg"></div>


            <div class="ax-form-group">
                <div class="ax-flex-row">
                    <div class="ax-form-label"></div>
                    <div class="ax-flex-block">
                        <div class="ax-form-input"><button type="submit" class="ax-btn ax-primary ax-full">确认提交</button></div>
                    </div>
                </div>
            </div>

        </form>
    </div>
</div>

</body>
<style>

    #tabs {  overflow: hidden;  width: 100%;  margin: 0;  padding: 0;  list-style: none;  }
    #tabs li {  float: left;  margin-left: 14px;  height: 40px;  line-height: 40px;cursor: pointer ;width: 100px;  }
    #contents {  background: #fff;  padding: 30px 0 25px;  position: relative;  }

    li span {  position: relative;  font-size: 16px;  }
    .current li{  outline: 0;  color: #3398cc;  border-bottom: 1px solid #3398cc;    }
    .current span{  outline: 0;  color: #3398cc;  border-bottom: 1px solid #3398cc;  }
    .current span:before{content: '';position: absolute;bottom: 0;left: 2px;width: 95%;
        height: 2px;background: #3398cc;border-radius: 30px;}
    #content {  background: #fff;  padding: 30px 0 25px;  position: relative;  }
    .item{  display: none;  }
    .show{  display: block;  }
    .ax-form-label{width: 95px !important;justify-content: flex-start !important;padding-left: 0;}
    .ax-form-input{width: 700px !important;}
    /*.ax-flex-block, .ax-flex-block-1{flex: 0.23}*/
    /*.label-name{flex: 1 !important;}*/

    .buy-bg{  position: absolute;  top: 0%;  left: 0%;  width:100%;  height: 100%;
        background-color: black;  z-index:1001;  -moz-opacity: 0.8;  opacity:.50;  filter: alpha(opacity=50);  }
    .buy_content {  position: absolute;  top: 15%;  left:28%;  width:575px;  height:auto;background: #fff;
        z-index:1002;  overflow: auto;padding: 15px;  text-align: left;  }
    .herf-main{background: #fff;padding: 10px;position: relative}
    .open-head{display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid #ddd;
        position: relative;padding-bottom: 10px;}
    .newhredup{font-size: 15px;color: #333}
    .closeup{position:relative;font-size: 23px;line-height: 23px;color: #333;cursor: pointer}
    .closePz{position:relative;font-size: 23px;line-height: 23px;color: #333;cursor: pointer}
    .tab-ligh{width: 120px;height: 28px;line-height: 28px;display: flex;align-items: center;
        border: 1px solid #ddd;margin-top: 3px;  background-color: #f8f8f8;  padding: 0;border-radius: 0 4px 4px 0;}
    .tab-ligh li{width: 50%;text-align: center;cursor: pointer}
    .lighten{background: #198cff;color: #fff}

    .ax-menu-page .ax-item{padding: 0 30px !important;background-color: #eee;color: #666}
    .ax-menu-page .ax-item.ax-active {  color: #333 !important;background: #fff  }
</style>

<script src="/static/rmtop/js/TopUpload.js"></script>

<script type="text/javascript">

    if ($.cookie('product_edit_tab_current')!= null){
        let num = $.cookie("product_edit_tab_current");
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $("#tabs li ").find("span").eq(num).parent().addClass("current");
        $("#contents div").removeClass("show");
        if(num == 2){
            $("#tab3").addClass('show')
        }else if(num == 1){
            $("#tab2").addClass('show')
        }else{
            $("#tab1").addClass('show')
        }
    }else{
        let num = 0;
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $("#tabs li ").find("span").eq(num).parent().addClass("current");
        $("#contents div").removeClass("show");
        $("#tab1").addClass('show')
    }

    $('#tabs li span').click(function(e) {
        e.preventDefault();
        $('#tabs li').removeClass("current").removeClass("hoverItem");
        $(this).parent().addClass("current");
        $("#contents div").removeClass("show");
        $('#' + $(this).attr('title')).addClass('show');
        let index = $("#tabs li ").find("span").index(this);
        $.cookie('product_edit_tab_current',index);
    });

</script>



<script charset="utf-8" src="/static/neditor/neditor.config.js"></script>
<script charset="utf-8" src="/static/neditor/neditor.all.js"></script>
<script charset="utf-8" src="/static/neditor/neditor.service.js"></script>
<script>
    var ue =  UE.getEditor("content",{
        autoHeight: false,
        initialFrameHeight:400,
        initialFrameWidth:window.screen.width/2.2,
    });

    ue.ready(function() {
        //设置编辑器的内容
        /**
         * @param $list 双引号 有bug
         */
        ue.setContent('{$list.content|raw}');
    });

</script>


